#!/bin/bash

# ================= 配置区域 =================
# 根目录路径
BASE_DIR="_posts/posts_02_daily_coding/post_02_top_interview_150"
# 起始日期 (格式 YYYY-MM-DD)
START_DATE="2024-03-01"
# 全局天数偏移量 (从0开始)
DAY_OFFSET=0

# ================= 工具函数 =================

# 获取计算后的日期
get_current_date() {
    if [[ "$OSTYPE" == "darwin"* ]]; then
        # macOS (BSD date)
        date -v+${DAY_OFFSET}d -j -f "%Y-%m-%d" "$START_DATE" +%Y-%m-%d
    else
        # Linux / Git Bash (GNU date)
        date -d "$START_DATE + $DAY_OFFSET days" +%Y-%m-%d
    fi
}

# 创建文件的主函数
create_files_in_folder() {
    folder_name=$1
    shift # 移除第一个参数，剩余的都是文件名
    
    target_dir="$BASE_DIR/$folder_name"
    
    # 确保目录存在
    if [ ! -d "$target_dir" ]; then
        mkdir -p "$target_dir"
    fi
    
    for raw_name in "$@"; do
        # 1. 计算当前日期
        curr_date=$(get_current_date)
        
        # 2. 清洗文件名 (去除 "2024-03-02-" 前缀)
        clean_content=$(echo "$raw_name" | sed -E 's/^[0-9]{4}-[0-9]{2}-[0-9]{2}-//')
        
        # 3. 去除空格
        clean_content="${clean_content// /}"
        
        # 4. 拼接最终路径
        final_filename="${curr_date}-${clean_content}.md"
        file_path="$target_dir/$final_filename"
        
        # 5. 创建空文件
        if [ ! -f "$file_path" ]; then
            touch "$file_path"
        fi
        
        # ==========================================
        # 核心修改：生成随机增量 (1, 2, 或 3)
        # ==========================================
        step=$(( (RANDOM % 3) + 1 ))
        
        # 打印日志
        echo "生成: $final_filename (步进: +$step 天)"
        
        # 更新全局偏移量
        DAY_OFFSET=$(( DAY_OFFSET + step ))
    done
}

echo "🚀 开始生成文件，日期随机递增 (1-3天)..."

# ================= 题目列表 =================

# 01 数组 / 字符串
create_files_in_folder "grp_01_数组_字符串" \
"2024-03-02-88-合并两个有序数组" \
"2024-03-02-27-移除元素" \
"2024-03-02-26-删除有序数组中的重复项" \
"2024-03-02-80-删除有序数组中的重复项 II" \
"2024-03-02-169-多数元素" \
"2024-03-02-189-轮转数组" \
"2024-03-02-121-买卖股票的最佳时机" \
"2024-03-02-122-买卖股票的最佳时机 II" \
"2024-03-02-55-跳跃游戏" \
"2024-03-02-45-跳跃游戏 II" \
"2024-03-02-274-H 指数" \
"2024-03-02-380-O(1) 时间插入、删除和获取随机元素" \
"2024-03-02-238-除自身以外数组的乘积" \
"2024-03-02-134-加油站" \
"2024-03-02-135-分发糖果" \
"2024-03-02-42-接雨水" \
"2024-03-02-13-罗马数字转整数" \
"2024-03-02-12-整数转罗马数字" \
"2024-03-02-58-最后一个单词的长度" \
"2024-03-02-14-最长公共前缀" \
"2024-03-02-151-反转字符串中的单词" \
"2024-03-02-6-Z 字形变换" \
"2024-03-02-28-找出字符串中第一个匹配项的下标" \
"2024-03-02-68-文本左右对齐"

# 02 双指针
create_files_in_folder "grp_02_双指针" \
"2024-03-02-125-验证回文串" \
"2024-03-02-392-判断子序列" \
"2024-03-02-167-两数之和 II - 输入有序数组" \
"2024-03-02-11-盛最多水的容器" \
"2024-03-02-15-三数之和"

# 03 滑动窗口
create_files_in_folder "grp_03_滑动窗口" \
"2024-03-02-209-长度最小的子数组" \
"2024-03-02-3-无重复字符的最长子串" \
"2024-03-02-30-串联所有单词的子串" \
"2024-03-02-76-最小覆盖子串"

# 04 矩阵
create_files_in_folder "grp_04_矩阵" \
"2024-03-02-36-有效的数独" \
"2024-03-02-54-螺旋矩阵" \
"2024-03-02-48-旋转图像" \
"2024-03-02-73-矩阵置零" \
"2024-03-02-289-生命游戏"

# 05 哈希表
create_files_in_folder "grp_05_哈希表" \
"2024-03-02-383-赎金信" \
"2024-03-02-205-同构字符串" \
"2024-03-02-290-单词规律" \
"2024-03-02-242-有效的字母异位词" \
"2024-03-02-49-字母异位词分组" \
"2024-03-02-1-两数之和" \
"2024-03-02-202-快乐数" \
"2024-03-02-219-存在重复元素 II" \
"2024-03-02-128-最长连续序列"

# 06 区间
create_files_in_folder "grp_06_区间" \
"2024-03-02-228-汇总区间" \
"2024-03-02-56-合并区间" \
"2024-03-02-57-插入区间" \
"2024-03-02-452-用最少数量的箭引爆气球"

# 07 栈
create_files_in_folder "grp_07_栈" \
"2024-03-02-20-有效的括号" \
"2024-03-02-71-简化路径" \
"2024-03-02-155-最小栈" \
"2024-03-02-150-逆波兰表达式求值" \
"2024-03-02-224-基本计算器"

# 08 链表
create_files_in_folder "grp_08_链表" \
"2024-03-02-141-环形链表" \
"2024-03-02-2-两数相加" \
"2024-03-02-21-合并两个有序链表" \
"2024-03-02-138-随机链表的复制" \
"2024-03-02-92-反转链表 II" \
"2024-03-02-25-K 个一组翻转链表" \
"2024-03-02-19-删除链表的倒数第 N 个结点" \
"2024-03-02-82-删除排序链表中的重复元素 II" \
"2024-03-02-61-旋转链表" \
"2024-03-02-86-分隔链表" \
"2024-03-02-146-LRU 缓存"

# 09 二叉树
create_files_in_folder "grp_09_二叉树" \
"2024-03-02-104-二叉树的最大深度" \
"2024-03-02-100-相同的树" \
"2024-03-02-226-翻转二叉树" \
"2024-03-02-101-对称二叉树" \
"2024-03-02-105-从前序与中序遍历序列构造二叉树" \
"2024-03-02-106-从中序与后序遍历序列构造二叉树" \
"2024-03-02-117-填充每个节点的下一个右侧节点指针 II" \
"2024-03-02-114-二叉树展开为链表" \
"2024-03-02-112-路径总和" \
"2024-03-02-129-求根节点到叶节点数字之和" \
"2024-03-02-124-二叉树中的最大路径和" \
"2024-03-02-173-二叉搜索树迭代器" \
"2024-03-02-222-完全二叉树的节点个数" \
"2024-03-02-236-二叉树的最近公共祖先"

# 10 二叉树层次遍历
create_files_in_folder "grp_10_二叉树层次遍历" \
"2024-03-02-199-二叉树的右视图" \
"2024-03-02-637-二叉树的层平均值" \
"2024-03-02-102-二叉树的层序遍历" \
"2024-03-02-103-二叉树的锯齿形层序遍历"

# 11 二叉搜索树
create_files_in_folder "grp_11_二叉搜索树" \
"2024-03-02-530-二叉搜索树的最小绝对差" \
"2024-03-02-230-二叉搜索树中第 K 小的元素" \
"2024-03-02-98-验证二叉搜索树"

# 12 图
create_files_in_folder "grp_12_图" \
"2024-03-02-200-岛屿数量" \
"2024-03-02-130-被围绕的区域" \
"2024-03-02-133-克隆图" \
"2024-03-02-399-除法求值" \
"2024-03-02-207-课程表" \
"2024-03-02-210-课程表 II"

# 13 图的广度优先搜索
create_files_in_folder "grp_13_图的广度优先搜索" \
"2024-03-02-909-蛇梯棋" \
"2024-03-02-433-最小基因变化" \
"2024-03-02-127-单词接龙"

# 14 字典树
create_files_in_folder "grp_14_字典树" \
"2024-03-02-208-实现 Trie (前缀树)" \
"2024-03-02-211-添加与搜索单词 - 数据结构设计" \
"2024-03-02-212-单词搜索 II"

# 15 回溯
create_files_in_folder "grp_15_回溯" \
"2024-03-02-17-电话号码的字母组合" \
"2024-03-02-77-组合" \
"2024-03-02-46-全排列" \
"2024-03-02-39-组合总和" \
"2024-03-02-52-N 皇后 II" \
"2024-03-02-22-括号生成" \
"2024-03-02-79-单词搜索"

# 16 分治
create_files_in_folder "grp_16_分治" \
"2024-03-02-108-将有序数组转换为二叉搜索树" \
"2024-03-02-148-排序链表" \
"2024-03-02-427-建立四叉树" \
"2024-03-02-23-合并 K 个升序链表"

# 17 Kadane算法
create_files_in_folder "grp_17_Kadane算法" \
"2024-03-02-53-最大子数组和" \
"2024-03-02-918-环形子数组的最大和"

# 18 二分查找
create_files_in_folder "grp_18_二分查找" \
"2024-03-02-35-搜索插入位置" \
"2024-03-02-74-搜索二维矩阵" \
"2024-03-02-162-寻找峰值" \
"2024-03-02-33-搜索旋转排序数组" \
"2024-03-02-34-在排序数组中查找元素的第一个和最后一个位置" \
"2024-03-02-153-寻找旋转排序数组中的最小值" \
"2024-03-02-4-寻找两个正序数组的中位数"

# 19 堆
create_files_in_folder "grp_19_堆" \
"2024-03-02-215-数组中的第K个最大元素" \
"2024-03-02-502-IPO" \
"2024-03-02-373-查找和最小的 K 对数字" \
"2024-03-02-295-数据流的中位数"

# 20 位运算
create_files_in_folder "grp_20_位运算" \
"2024-03-02-67-二进制求和" \
"2024-03-02-190-颠倒二进制位" \
"2024-03-02-191-位1的个数" \
"2024-03-02-136-只出现一次的数字" \
"2024-03-02-137-只出现一次的数字 II" \
"2024-03-02-201-数字范围按位与"

# 21 数学
create_files_in_folder "grp_21_数学" \
"2024-03-02-9-回文数" \
"2024-03-02-66-加一" \
"2024-03-02-172-阶乘后的零" \
"2024-03-02-69-x 的平方根" \
"2024-03-02-50-Pow(x, n)" \
"2024-03-02-149-直线上最多的点数"

# 22 一维动态规划
create_files_in_folder "grp_22_一维动态规划" \
"2024-03-02-70-爬楼梯" \
"2024-03-02-198-打家劫舍" \
"2024-03-02-139-单词拆分" \
"2024-03-02-322-零钱兑换" \
"2024-03-02-300-最长递增子序列"

# 23 多维动态规划
create_files_in_folder "grp_23_多维动态规划" \
"2024-03-02-120-三角形最小路径和" \
"2024-03-02-64-最小路径和" \
"2024-03-02-63-不同路径 II" \
"2024-03-02-5-最长回文子串" \
"2024-03-02-97-交错字符串" \
"2024-03-02-72-编辑距离" \
"2024-03-02-123-买卖股票的最佳时机 III" \
"2024-03-02-188-买卖股票的最佳时机 IV" \
"2024-03-02-221-最大正方形"

echo "🎉 成功生成文件！"
echo "📅 最终日期停留在: $(get_current_date)"