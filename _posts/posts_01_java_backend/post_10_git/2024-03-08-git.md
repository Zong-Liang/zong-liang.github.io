---
title: Git
date: 2024-03-08 06:00:00 +0800
categories: [Java Backend, Git]
tags: [Git]
toc: true
math: true
pin: false
render_with_liquid: false
image:
  path: assets/img/others/wallhaven-9d3elw_2560x1440.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
---

## Git 是什么？

Git 是一个免费、开源的**分布式版本控制系统**，由 Linus Torvalds 于 2005 年创建，最初目的是为了更好地管理 Linux 内核的开发。 与传统的集中式版本控制系统（如 SVN）不同，Git 的每个克隆（clone）都是一个完整的代码仓库，包含了完整的历史记录。 这意味着开发者可以在本地进行绝大部分操作，例如提交、创建分支、查看历史记录等，而无需实时连接到中央服务器。

**Git 的主要优势：**

- **分布式架构：** 每个开发者都拥有完整的代码库，提高了工作的灵活性和容错性。即使在没有网络连接的情况下，开发者也可以继续工作。
- **卓越的性能：** Git 的速度非常快，无论是提交、分支还是合并操作，都能在短时间内完成。
- **强大的分支模型：** Git 的分支功能非常轻量级，创建和切换分支几乎是瞬时完成的。这极大地鼓励了开发者使用分支进行功能开发和实验，而不会影响主线的稳定性。
- **数据完整性：** Git 通过 SHA-1 哈希算法确保数据的完整性。 仓库中的所有对象（文件内容、目录结构、提交信息等）都通过其内容的哈希值来索引和校验，从而保证历史记录不会被轻易篡改。

## Git 的核心工作流程

Git 的工作流程主要围绕三个核心区域展开：**工作区（Working Directory）**、**暂存区（Staging Area）** 和 **本地仓库（Local Repository）**。

- **工作区：** 这是我们实际进行代码编写和修改的地方，也就是项目的文件目录。
- **暂存区：** 英文也叫 Index 或 Stage。它像一个缓冲区，用于临时存放我们希望在下一次提交中包含的变更。 我们可以通过 `git add` 命令将工作区的修改添加到暂存区。
- **本地仓库：** 这是 .git 目录下的数据库，保存了项目的所有版本历史记录。 当我们执行 `git commit` 命令时，暂存区的内容就会被永久地记录到本地仓库中，形成一个新的版本快照。

一个典型的 Git 工作流程如下：

1.  **克隆远程仓库**到本地 (`git clone`)。
2.  在工作区进行**代码的修改、添加或删除**。
3.  使用 `git add` 将想要提交的修改**添加到暂存区**。
4.  使用 `git commit` 将暂存区的内容**提交到本地仓库**，并附上清晰的提交信息。
5.  在合适的时机，使用 `git push` 将本地仓库的提交**推送到远程仓库**，与团队成员共享。
6.  当需要获取团队其他成员的更新时，使用 `git pull` 从远程仓库**拉取最新的代码并合并**到本地。

## 常用 Git 命令

在日常开发中，我会频繁使用以下一些 Git 命令：

- **仓库操作：**
  - `git init`: 初始化一个新的本地 Git 仓库。
  - `git clone <url>`: 从远程仓库克隆一个副本到本地。
- **文件操作：**
  - `git add <file>`: 将指定文件的修改添加到暂存区。
  - `git status`: 查看工作区和暂存区的状态。
  - `git diff`: 查看工作区与暂存区、或暂存区与最新提交之间的差异。
  - `git reset <file>`: 将文件从暂存区移出，但保留工作区的修改。
  - `git checkout -- <file>`: 放弃工作区对指定文件的修改。
- **提交操作：**
  - `git commit -m "message"`: 将暂存区的内容提交到本地仓库，并附上提交信息。
  - `git commit --amend`: 修改最后一次的提交信息。
- **分支管理：**
  - `git branch`: 查看、创建或删除分支。
  - `git checkout <branch>`: 切换到指定分支。
  - `git merge <branch>`: 将指定分支的修改合并到当前分支。
- **远程协作：**
  - `git remote -v`: 查看已配置的远程仓库。
  - `git fetch`: 从远程仓库获取最新的变更，但不会自动合并。
  - `git pull`: 从远程仓库拉取最新的变更并自动合并到当前分支。
  - `git push`: 将本地的提交推送到远程仓库。

## Git 分支模型

在团队协作中，一个清晰、规范的分支模型至关重要。我比较熟悉并常用的主要是 **Git Flow** 模型。

**Git Flow** 定义了以下几种主要的分支类型：

- **主要分支：**
  - `master` (或 `main`): 用于存放稳定、可随时发布的生产环境代码。这个分支的代码应该是经过充分测试的。
  - `develop`: 作为日常开发的主分支，包含了最新的开发成果。
- **辅助分支 (Supporting branches)：** 这些分支是临时的，完成使命后会被删除。
  - `feature/*`: 用于开发新功能。 从 `develop` 分支创建，完成开发后再合并回 `develop`。
  - `release/*`: 用于准备发布新版本。 从 `develop` 分支创建，在这个分支上进行测试、修复 bug，并准备发布相关的元数据。 完成后，它会被同时合并到 `master` 和 `develop` 分支。
  - `hotfix/*`: 用于紧急修复生产环境中的 bug。 从 `master` 分支创建，修复完成后，同样需要合并回 `master` 和 `develop` 分支。
