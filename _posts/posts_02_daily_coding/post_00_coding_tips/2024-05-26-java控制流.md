---
title: Java控制流
date: 2024-05-26 06:00:00 +0800
categories: [Daily Coding, Coding Tips, Java控制流]
tags: [Java控制流]
toc: true
math: true
pin: false
render_with_liquid: false
image:
  path: https://cdn.jsdelivr.net/gh/Zong-Liang/blog_images/blog/2024/daily_coding/20251123154214715.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
---

控制流是编程的“交通规则”，它决定了代码的执行顺序。掌握了控制流，你就能让程序根据不同的条件执行不同的代码，或者重复执行某些任务。

## 核心概念总结

- **选择结构**：让程序能在多个路径中选择一条来执行。
- **循环结构**：让程序可以重复执行一段代码，直到满足某个退出条件。
- **跳转语句**：提供了在循环内部进行更精细控制的能力，可以提前退出循环（`break`）或跳过单次迭代（`continue`）。

## Java 代码

```java
import java.util.Scanner;

/**
 * @author zongliang_i
 *
 * 这是一个用于学习Java中所有主要控制流结构的程序。
 * 它涵盖了：
 * 1. 选择结构: if-else, switch (包括传统和现代语法)
 * 2. 循环结构: for, while, do-while, for-each
 * 3. 跳转语句: break, continue, return
 */
public class Main {
    public static void main(String[] args) {
        // 使用 Scanner 来获取用户输入
        Scanner scanner = new Scanner(System.in);

        System.out.println("--- 1. 选择结构 (Decision Making) ---");
        demonstrateIfElse(75); // 演示 if-else
        demonstrateSwitch(3);   // 演示 switch

        System.out.println("\n--- 2. 循环结构 (Loops) ---");
        demonstrateForLoop();           // 演示 for 循环
        demonstrateWhileLoop(scanner);  // 演示 while 循环
        demonstrateDoWhileLoop(scanner); // 演示 do-while 循环
        demonstrateForEachLoop();       // 演示 for-each 循环

        System.out.println("\n--- 3. 跳转语句 (Branching) ---");
        demonstrateBranching();         // 演示 break 和 continue

        // 关闭 scanner，释放资源
        scanner.close();
        System.out.println("\n学习程序结束。");
    }

    /**
     * 1a. 演示 if, else if, else 结构
     * 用于基于条件执行不同的代码块。
     */
    public static void demonstrateIfElse(int score) {
        System.out.println("--- 演示 If-Else ---");
        System.out.println("输入的考试分数是: " + score);

        if (score >= 90) {
            System.out.println("结果: 优秀 (Excellent)");
        } else if (score >= 75) {
            System.out.println("结果: 良好 (Good)");
        } else if (score >= 60) {
            System.out.println("结果: 及格 (Pass)");
        } else {
            System.out.println("结果: 不及格 (Fail)");
        }
    }

    /**
     * 1b. 演示 switch 结构
     * 用于基于一个变量的多个离散值进行选择。
     */
    public static void demonstrateSwitch(int dayOfWeek) {
        System.out.println("\n--- 演示 Switch ---");
        System.out.println("输入的星期数字是: " + dayOfWeek);

        // 传统 Switch 语法 (需要 break)
        String dayName;
        switch (dayOfWeek) {
            case 1:
                dayName = "星期一";
                break; // 如果没有 break, 会继续执行下一个 case (fall-through)
            case 2:
                dayName = "星期二";
                break;
            case 3:
                dayName = "星期三";
                break;
            case 4:
                dayName = "星期四";
                break;
            case 5:
                dayName = "星期五";
                break;
            case 6:
            case 7: // 多个 case 可以共享一个代码块
                dayName = "周末";
                break;
            default:
                dayName = "无效的输入";
                break;
        }
        System.out.println("传统 Switch 结果: " + dayName);

        // 现代 Switch 表达式 (Java 14+) - 更简洁、更安全
        String modernDayName = switch (dayOfWeek) {
            case 1 -> "星期一";
            case 2 -> "星期二";
            case 3 -> "星期三";
            case 4 -> "星期四";
            case 5 -> "星期五";
            case 6, 7 -> "周末"; // 多个值可以用逗号分隔
            default -> "无效的输入";
        }; // 注意这里有分号，因为它是一个表达式
        System.out.println("现代 Switch 结果: " + modernDayName);
    }

    /**
     * 2a. 演示 for 循环
     * 适用于已知循环次数的场景。
     */
    public static void demonstrateForLoop() {
        System.out.println("--- 演示 For 循环 ---");
        // for (初始化; 循环条件; 更新)
        for (int i = 1; i <= 5; i++) {
            System.out.println("当前计数值: " + i);
        }
    }

    /**
     * 2b. 演示 while 循环
     * 适用于未知循环次数，但知道循环结束条件的场景。
     * 先判断条件，再执行循环体。
     */
    public static void demonstrateWhileLoop(Scanner scanner) {
        System.out.println("\n--- 演示 While 循环 (猜数字游戏) ---");
        int magicNumber = 7;
        int guess = -1;
        System.out.println("猜一个1到10之间的数字 (输入 " + magicNumber + " 退出):");

        while (guess != magicNumber) {
            System.out.print("请输入你的猜测: ");
            guess = scanner.nextInt();
            if (guess != magicNumber) {
                System.out.println("猜错了，请重试！");
            }
        }
        System.out.println("恭喜你，猜对了！");
    }

    /**
     * 2c. 演示 do-while 循环
     * 与 while 类似，但它保证循环体至少被执行一次。
     * 先执行循环体，再判断条件。
     */
    public static void demonstrateDoWhileLoop(Scanner scanner) {
        System.out.println("\n--- 演示 Do-While 循环 (菜单) ---");
        String command;
        do {
            System.out.println("请输入命令 ('start', 'stop', 'exit'):");
            command = scanner.next();
            System.out.println("执行命令: " + command);
        } while (!command.equals("exit")); // 只要输入的不是 "exit"，就一直循环
        System.out.println("程序已退出。");
    }

    /**
     * 2d. 演示 for-each (增强 for) 循环
     * 用于以更简洁的方式遍历数组或集合。
     */
    public static void demonstrateForEachLoop() {
        System.out.println("\n--- 演示 For-Each 循环 ---");
        String[] fruits = {"苹果", "香蕉", "橙子"};
        System.out.println("水果篮里有:");
        for (String fruit : fruits) {
            System.out.println("- " + fruit);
        }
    }

    /**
     * 3. 演示 break 和 continue
     * break: 立即跳出并终止整个循环。
     * continue: 跳过当前这次循环的剩余部分，直接开始下一次循环。
     */
    public static void demonstrateBranching() {
        System.out.println("--- 演示 Break 和 Continue ---");
        int[] numbers = {1, 2, 3, -4, 5, 6, 7};

        System.out.println("使用 break 查找第一个负数:");
        for (int num : numbers) {
            if (num < 0) {
                System.out.println("找到了负数: " + num + "，循环终止。");
                break; // 立即跳出 for 循环
            }
            System.out.println("检查数字: " + num);
        }

        System.out.println("\n使用 continue 打印所有正数:");
        for (int num : numbers) {
            if (num < 0) {
                System.out.println("(跳过负数: " + num + ")");
                continue; // 跳过本次循环的剩余代码，直接进入下一次循环
            }
            System.out.println("这是一个正数: " + num);
        }
    }
}
```
