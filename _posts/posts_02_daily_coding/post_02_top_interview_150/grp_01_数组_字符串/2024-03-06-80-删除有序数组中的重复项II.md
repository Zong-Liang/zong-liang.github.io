---
title: 80. 删除有序数组中的重复项II
date: 2024-03-06 06:00:00 +0800
categories: [Daily Coding, Top Interview 150, 数组_字符串]
tags: [数组_字符串]
toc: true
math: true
pin: false
render_with_liquid: false
image:
  path: https://cdn.jsdelivr.net/gh/Zong-Liang/blog_images/blog/2024/daily_coding/20251121222028369.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
---

## 题目：80. 删除有序数组中的重复项 II

**描述**

给你一个有序数组 `nums` ，请你 **原地** 删除重复出现的元素，使得出现次数超过两次的元素**只出现两次** ，返回删除后数组的新长度。

不要使用额外的数组空间，你必须在 **原地 修改输入数组** 并在使用 O(1) 额外空间的条件下完成。

**说明：**

为什么返回数值是整数，但输出的答案是数组呢？

请注意，输入数组是以「引用」方式传递的，这意味着在函数里修改输入数组对于调用者是可见的。

**示例 1:**

- **输入:** `nums = [1,1,1,2,2,3]`
- **输出:** `5`, `nums = [1,1,2,2,3,_]`
- **解释:** 函数应返回新长度 `length = 5`, 并且原数组的前五个元素被修改为 `1, 1, 2, 2, 3` 。 不需要考虑数组中超出新长度后面的元素。

**示例 2:**

- **输入:** `nums = [0,0,1,1,1,1,2,3,3]`
- **输出:** `7`, `nums = [0,0,1,1,2,3,3,_,_]`

**提示:**

- `1 <= nums.length <= 3 * 10^4`
- `-10^4 <= nums[i] <= 10^4`
- `nums` 已按升序排列

## 题解

```java
import java.util.Arrays;

public class Main {

    /**
     * 原地删除有序数组中的重复项，使得每个元素最多出现两次。
     * 采用快慢指针法。
     *
     * @param nums 有序整数数组
     * @return 新数组的长度
     */
    public static int removeDuplicates(int[] nums) {
        if (nums == null || nums.length == 0) {
            return 0;
        }

        // slow 指针指向下一个要被覆盖的位置，也代表了新数组的长度
        // fast 指针用于遍历整个数组
        int slow = 0;

        // 遍历数组
        for (int fast = 0; fast < nums.length; fast++) {
            // 核心判断条件：
            // 1. slow < 2: 新数组的头两个元素总是可以被接受的。
            // 2. nums[fast] != nums[slow - 2]:
            //    当前 fast 指针的元素与新数组倒数第二个元素不同。
            //    这保证了即使 nums[fast] 和 nums[slow - 1] 相同，
            //    它也只会出现第二次，而不是第三次。
            if (slow < 2 || nums[fast] != nums[slow - 2]) {
                nums[slow] = nums[fast];
                slow++;
            }
        }

        return slow;
    }

    public static void main(String[] args) {
        // 示例 1
        int[] nums1 = {1, 1, 1, 2, 2, 3};
        System.out.println("输入: " + Arrays.toString(nums1));
        int len1 = removeDuplicates(nums1);
        System.out.print("输出: " + len1 + ", nums = [");
        for (int i = 0; i < len1; i++) {
            System.out.print(nums1[i] + (i == len1 - 1 ? "" : ","));
        }
        System.out.println("]"); // 预期: 5, nums = [1,1,2,2,3]
        System.out.println("---");

        // 示例 2
        int[] nums2 = {0, 0, 1, 1, 1, 1, 2, 3, 3};
        System.out.println("输入: " + Arrays.toString(nums2));
        int len2 = removeDuplicates(nums2);
        System.out.print("输出: " + len2 + ", nums = [");
        for (int i = 0; i < len2; i++) {
            System.out.print(nums2[i] + (i == len2 - 1 ? "" : ","));
        }
        System.out.println("]"); // 预期: 7, nums = [0,0,1,1,2,3,3]
        System.out.println("---");
    }
}
```
