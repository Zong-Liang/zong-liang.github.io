---
title: 28-找出字符串中第一个匹配项的下标
date: 2024-04-11 06:00:00 +0800
categories: [Daily Coding, Top Interview 150, 数组_字符串]
tags: [数组_字符串]
toc: true
math: true
pin: false
render_with_liquid: false
image:
  path: https://cdn.jsdelivr.net/gh/Zong-Liang/blog_images/blog/2024/daily_coding/20251121223531446.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
---

好的，这是图片中问题的整理以及符合要求的 Java 8 解答。

### 题目：28. 找出字符串中第一个匹配项的下标

**描述**
给你两个字符串 `haystack` 和 `needle` ，请你在 `haystack` 字符串中找出 `needle` 字符串的第一个匹配项的下标（下标从 0 开始）。如果 `needle` 不是 `haystack` 的一部分，则返回 `-1` 。

**示例 1:**

- **输入:** `haystack = "sadbutsad"`, `needle = "sad"`
- **输出:** 0
- **解释:** `"sad"` 在下标 0 和 6 处匹配。第一个匹配项的下标是 0 ，所以返回 0 。

**示例 2:**

- **输入:** `haystack = "leetcode"`, `needle = "leeto"`
- **输出:** -1
- **解释:** `"leeto"` 没有在 `"leetcode"` 中出现，所以返回 -1 。

**提示:**

- `1 <= haystack.length, needle.length <= 10^4`
- `haystack` 和 `needle` 仅由小写英文字符组成

---

### 赛码网格式 Java 8 代码

```java
public class Main {

    /**
     * 找出 needle 字符串在 haystack 字符串中第一次出现的位置。
     * 本质上是实现 String.indexOf() 的功能。
     *
     * @param haystack 主字符串
     * @param needle   要查找的子字符串
     * @return 第一次出现的下标，如果不存在则返回 -1
     */
    public static int strStr(String haystack, String needle) {
        // 如果 needle 是空字符串，按照定义返回 0
        if (needle.isEmpty()) {
            return 0;
        }

        int hLen = haystack.length();
        int nLen = needle.length();

        // 如果 needle 比 haystack 还长，不可能找到
        if (nLen > hLen) {
            return -1;
        }

        // 遍历 haystack，但只需要遍历到 hLen - nLen 的位置
        // 因为从这之后，剩余的字符串长度已不足以容纳 needle
        for (int i = 0; i <= hLen - nLen; i++) {
            // 检查从 i 开始的子串是否与 needle 匹配
            int j = 0;
            while (j < nLen && haystack.charAt(i + j) == needle.charAt(j)) {
                j++;
            }

            // 如果 j 成功遍历完 needle 的所有字符，说明匹配成功
            if (j == nLen) {
                return i;
            }
        }

        // 遍历结束都没有找到匹配项
        return -1;
    }

    public static void main(String[] args) {
        // 示例 1
        String haystack1 = "sadbutsad";
        String needle1 = "sad";
        System.out.println("输入: haystack = \"" + haystack1 + "\", needle = \"" + needle1 + "\"");
        System.out.println("输出: " + strStr(haystack1, needle1)); // 预期: 0
        System.out.println("---");

        // 示例 2
        String haystack2 = "leetcode";
        String needle2 = "leeto";
        System.out.println("输入: haystack = \"" + haystack2 + "\", needle = \"" + needle2 + "\"");
        System.out.println("输出: " + strStr(haystack2, needle2)); // 预期: -1
        System.out.println("---");
    }
}
```
