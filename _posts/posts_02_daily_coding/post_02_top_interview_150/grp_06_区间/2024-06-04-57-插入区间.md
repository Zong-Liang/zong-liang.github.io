---
title: 57-插入区间
date: 2024-06-04 06:00:00 +0800
categories: [Daily Coding, Top Interview 150, 区间]
tags: [区间]
toc: true
math: true
pin: false
render_with_liquid: false
image:
  path: https://cdn.jsdelivr.net/gh/Zong-Liang/blog_images/blog/2024/daily_coding/20251121225715612.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
---


### 题目：57. 插入区间

**描述**
给你一个 **无重叠** 的 ，按照区间起始端点排序的区间列表 `intervals` ，其中 `intervals[i] = [start_i, end_i]` 表示第 `i` 个区间的开始和结束，并且 `intervals` 按照 `start_i` **升序排列** 。

同样给定一个区间 `newInterval = [start, end]` 表示另一个区间的开始和结束。

在 `intervals` 中插入区间 `newInterval`，使得 `intervals` 依然按照 `start_i` 升序排列，且区间之间不重叠（如果有必要的话，可以合并区间）。

返回插入之后的 `intervals`。

**注意** 你不需要原地修改 `intervals`。你可以创建一个新数组然后返回它。

**示例 1:**

- **输入:** `intervals = [[1,3],[6,9]]`, `newInterval = [2,5]`
- **输出:** `[[1,5],[6,9]]`

**示例 2:**

- **输入:** `intervals = [[1,2],[3,5],[6,7],[8,10],[12,16]]`, `newInterval = [4,8]`
- **输出:** `[[1,2],[3,10],[12,16]]`
- **解释:** 这是因为新的区间 `[4,8]` 与 `[3,5],[6,7],[8,10]` 重叠。

**提示:**

- `0 <= intervals.length <= 10^4`
- `intervals[i].length == 2`
- `0 <= start_i <= end_i <= 10^5`
- `intervals` 根据 `start_i` 按 **升序** 排列
- `newInterval.length == 2`
- `0 <= start <= end <= 10^5`

---

### 赛码网格式 Java 8 代码

```java
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class Main {

    /**
     * 将 newInterval 插入到 intervals 中，并合并重叠的区间。
     *
     * @param intervals   已排序的、无重叠的区间列表
     * @param newInterval 要插入的新区间
     * @return 插入并合并后的区间列表
     */
    public static int[][] insert(int[][] intervals, int[] newInterval) {
        List<int[]> result = new ArrayList<>();
        int i = 0;
        int n = intervals.length;

        // 1. 添加所有在 newInterval 左侧且不重叠的区间
        //    条件是：当前区间的结束点 < 新区间的起始点
        while (i < n && intervals[i][1] < newInterval[0]) {
            result.add(intervals[i]);
            i++;
        }

        // 2. 合并所有与 newInterval 重叠的区间
        //    条件是：当前区间的起始点 <= 新区间的结束点
        while (i < n && intervals[i][0] <= newInterval[1]) {
            // 更新 newInterval 的边界，使其包含当前区间
            newInterval[0] = Math.min(newInterval[0], intervals[i][0]);
            newInterval[1] = Math.max(newInterval[1], intervals[i][1]);
            i++;
        }
        // 将合并后的 newInterval 添加到结果中
        result.add(newInterval);

        // 3. 添加所有在 newInterval 右侧且不重叠的区间
        while (i < n) {
            result.add(intervals[i]);
            i++;
        }

        // 将 List<int[]> 转换为 int[][]
        return result.toArray(new int[result.size()][]);
    }

    public static void main(String[] args) {
        // 示例 1
        int[][] intervals1 = {{1, 3}, {6, 9}};
        int[] newInterval1 = {2, 5};
        System.out.println("输入: intervals = " + Arrays.deepToString(intervals1) + ", newInterval = " + Arrays.toString(newInterval1));
        int[][] result1 = insert(intervals1, newInterval1);
        System.out.println("输出: " + Arrays.deepToString(result1)); // 预期: [[1, 5], [6, 9]]
        System.out.println("---");

        // 示例 2
        int[][] intervals2 = {{1, 2}, {3, 5}, {6, 7}, {8, 10}, {12, 16}};
        int[] newInterval2 = {4, 8};
        System.out.println("输入: intervals = " + Arrays.deepToString(intervals2) + ", newInterval = " + Arrays.toString(newInterval2));
        int[][] result2 = insert(intervals2, newInterval2);
        System.out.println("输出: " + Arrays.deepToString(result2)); // 预期: [[1, 2], [3, 10], [12, 16]]
        System.out.println("---");

        // 额外测试用例：新区间在所有区间之前
        int[][] intervals3 = {{3, 5}, {6, 9}};
        int[] newInterval3 = {1, 2};
        System.out.println("输入: intervals = " + Arrays.deepToString(intervals3) + ", newInterval = " + Arrays.toString(newInterval3));
        int[][] result3 = insert(intervals3, newInterval3);
        System.out.println("输出: " + Arrays.deepToString(result3)); // 预期: [[1, 2], [3, 5], [6, 9]]
        System.out.println("---");

        // 额外测试用例：新区间在所有区间之后
        int[][] intervals4 = {{1, 2}, {3, 5}};
        int[] newInterval4 = {6, 8};
        System.out.println("输入: intervals = " + Arrays.deepToString(intervals4) + ", newInterval = " + Arrays.toString(newInterval4));
        int[][] result4 = insert(intervals4, newInterval4);
        System.out.println("输出: " + Arrays.deepToString(result4)); // 预期: [[1, 2], [3, 5], [6, 8]]
    }
}
```
