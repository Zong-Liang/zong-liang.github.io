---
title: 202. 快乐数
date: 2024-05-25 06:00:00 +0800
categories: [Daily Coding, Top Interview 150, 哈希表]
tags: [哈希表]
toc: true
math: true
pin: false
render_with_liquid: false
image:
  path: https://cdn.jsdelivr.net/gh/Zong-Liang/blog_images/blog/2024/daily_coding/20251121225442998.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
---


## 题目：202. 快乐数

**描述**

编写一个算法来判断一个数 `n` 是不是快乐数。

**「快乐数」** 定义为：

- 对于一个正整数，每一次将该数替换为它每个位置上的数字的平方和。
- 然后重复这个过程直到这个数变为 1，也可能是 **无限循环** 但始终变不到 1。
- 如果这个过程 **结果为 1**，那么这个数就是快乐数。

如果 `n` 是快乐数就返回 `true` ；不是，则返回 `false` 。

**示例 1:**

- **输入:** `n = 19`
- **输出:** `true`
- **解释:**
  - 1² + 9² = 82
  - 8² + 2² = 68
  - 6² + 8² = 100
  - 1² + 0² + 0² = 1

**示例 2:**

- **输入:** `n = 2`
- **输出:** `false`

**提示:**

- `1 <= n <= 2^31 - 1`


## Java 代码

```java
import java.util.HashSet;
import java.util.Set;

public class Main {

    /**
     * 计算一个数各位数字的平方和。
     *
     * @param n 整数
     * @return 各位数字的平方和
     */
    private static int getNext(int n) {
        int totalSum = 0;
        while (n > 0) {
            int digit = n % 10; // 取出个位数
            n = n / 10;       // 去掉个位数
            totalSum += digit * digit;
        }
        return totalSum;
    }

    /**
     * 判断一个数是否是快乐数。
     * 核心思想是检测计算过程中是否出现循环。
     *
     * @param n 要判断的数
     * @return 如果是快乐数返回 true，否则返回 false
     */
    public static boolean isHappy(int n) {
        // 使用 HashSet 来存储计算过程中出现的数，用于检测循环
        Set<Integer> seen = new HashSet<>();

        // 如果 n 不等于 1 且 n 没有出现过（不成环），则继续循环
        while (n != 1 && !seen.contains(n)) {
            // 将当前数加入到 Set 中
            seen.add(n);
            // 计算下一个数
            n = getNext(n);
        }

        // 循环结束后，如果 n 等于 1，说明是快乐数
        return n == 1;
    }

    public static void main(String[] args) {
        // 示例 1
        int n1 = 19;
        System.out.println("输入: n = " + n1);
        System.out.println("输出: " + isHappy(n1)); // 预期: true
        System.out.println("---");

        // 示例 2
        int n2 = 2;
        System.out.println("输入: n = " + n2);
        System.out.println("输出: " + isHappy(n2)); // 预期: false
        System.out.println("---");
    }
}
```
