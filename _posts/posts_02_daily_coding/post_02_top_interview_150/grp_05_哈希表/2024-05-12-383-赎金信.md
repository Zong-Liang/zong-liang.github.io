---
title: 383. 赎金信
date: 2024-05-12 06:00:00 +0800
categories: [Daily Coding, Top Interview 150, 哈希表]
tags: [哈希表]
toc: true
math: true
pin: false
render_with_liquid: false
image:
  path: https://cdn.jsdelivr.net/gh/Zong-Liang/blog_images/blog/2024/daily_coding/20251121225029170.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
---

## 题目：383. 赎金信

**描述：**

给你两个字符串：`ransomNote` 和 `magazine` ，判断 `ransomNote` 能不能由 `magazine` 里面的字符构成。

如果可以，返回 `true` ；否则返回 `false` 。

`magazine` 中的每个字符只能在 `ransomNote` 中使用一次。

**示例 1:**

- **输入:** `ransomNote = "a"`, `magazine = "b"`
- **输出:** `false`

**示例 2:**

- **输入:** `ransomNote = "aa"`, `magazine = "ab"`
- **输出:** `false`

**示例 3:**

- **输入:** `ransomNote = "aa"`, `magazine = "aab"`
- **输出:** `true`

**提示:**

- `1 <= ransomNote.length, magazine.length <= 10^5`
- `ransomNote` 和 `magazine` 由小写英文字母组成

## 题解

### 解法：哈希表（字符计数数组）

**思路：**

题目本质上是要求我们统计 `magazine` 中每个字符出现的次数，然后检查是否足够覆盖 `ransomNote` 中每个字符需要的次数。

由于题目限定了字符集为 **小写英文字母**，我们可以使用一个长度为 26 的整型数组 `cnt` 来代替哈希表（HashMap），这样在空间和时间上都会更高效。

1.  **预判**：如果 `ransomNote` 的长度大于 `magazine` 的长度，显然不够拼凑，直接返回 `false`。
2.  **统计**：遍历 `magazine` 字符串，统计每个字符出现的次数，存入 `cnt` 数组中（索引为 `c - 'a'`）。
3.  **消耗**：遍历 `ransomNote` 字符串，对于每个字符，将 `cnt` 数组中对应的计数减 1。
4.  **检查**：在减 1 后，如果发现该字符的计数小于 0，说明 `magazine` 中该字符的数量不够用，直接返回 `false`。
5.  如果遍历结束都没有返回 `false`，说明满足条件，返回 `true`。

**复杂度分析：**

- **时间复杂度：** $O(m + n)$，其中 $m$ 是 `magazine` 的长度，$n$ 是 `ransomNote` 的长度。我们需要分别遍历两个字符串一次。
- **空间复杂度：** $O(1)$，因为字符集大小固定为 26，数组占用常数空间。

**代码片段：**

```java
public boolean canConstruct(String ransomNote, String magazine) {
    // 如果赎金信比杂志还长，肯定不够
    if (ransomNote.length() > magazine.length()) {
        return false;
    }

    int[] cnt = new int[26];

    // 统计 magazine 中的字符
    for (char c : magazine.toCharArray()) {
        cnt[c - 'a']++;
    }

    // 验证 ransomNote
    for (char c : ransomNote.toCharArray()) {
        cnt[c - 'a']--;
        // 如果减去之后小于 0，说明 magazine 里这个字符不够用
        if (cnt[c - 'a'] < 0) {
            return false;
        }
    }
    return true;
}
```

### 完整代码

```java
public class Main {

    // 核心算法实现：字符计数数组
    public static boolean canConstruct(String ransomNote, String magazine) {
        // 优化：长度判断
        if (ransomNote.length() > magazine.length()) {
            return false;
        }

        int[] cnt = new int[26];

        // 1. 统计 magazine 的字符存量
        for (char c : magazine.toCharArray()) {
            cnt[c - 'a']++;
        }

        // 2. 消耗存量构建 ransomNote
        for (char c : ransomNote.toCharArray()) {
            cnt[c - 'a']--;
            // 如果存量不足（变成负数），直接返回 false
            if (cnt[c - 'a'] < 0) {
                return false;
            }
        }

        return true;
    }

    public static void main(String[] args) {
        // --- 示例 1 ---
        String ransomNote1 = "a";
        String magazine1 = "b";
        System.out.println("示例 1 输入: ransomNote = \"" + ransomNote1 + "\", magazine = \"" + magazine1 + "\"");
        System.out.println("示例 1 输出: " + canConstruct(ransomNote1, magazine1));
        System.out.println("-----------------------------");

        // --- 示例 2 ---
        String ransomNote2 = "aa";
        String magazine2 = "ab";
        System.out.println("示例 2 输入: ransomNote = \"" + ransomNote2 + "\", magazine = \"" + magazine2 + "\"");
        System.out.println("示例 2 输出: " + canConstruct(ransomNote2, magazine2));
        System.out.println("-----------------------------");

        // --- 示例 3 ---
        String ransomNote3 = "aa";
        String magazine3 = "aab";
        System.out.println("示例 3 输入: ransomNote = \"" + ransomNote3 + "\", magazine = \"" + magazine3 + "\"");
        System.out.println("示例 3 输出: " + canConstruct(ransomNote3, magazine3));
    }
}
```
