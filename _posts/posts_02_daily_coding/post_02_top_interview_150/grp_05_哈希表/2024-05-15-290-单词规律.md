---
title: 290. 单词规律
date: 2024-05-15 06:00:00 +0800
categories: [Daily Coding, Top Interview 150, 哈希表]
tags: [哈希表]
toc: true
math: true
pin: false
render_with_liquid: false
image:
  path: https://cdn.jsdelivr.net/gh/Zong-Liang/blog_images/blog/2024/daily_coding/20251121225206574.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
---

## 题目：290. 单词规律

**描述**

给定一种规律 `pattern` 和一个字符串 `s` ，判断 `s` 是否遵循相同的规律。

这里的 **遵循** 指完全匹配，例如，`pattern` 里的每个字母和字符串 `s` 中的每个非空单词之间存在着双向连接的对应规律。具体来说：

- `pattern` 中的每个字母都 **恰好** 映射到 `s` 中的一个唯一单词。
- `s` 中的每个唯一单词都 **恰好** 映射到 `pattern` 中的一个字母。
- 没有两个字母映射到同一个单词，也没有两个单词映射到同一个字母。

**示例 1:**

- **输入:** `pattern = "abba"`, `s = "dog cat cat dog"`
- **输出:** `true`

**示例 2:**

- **输入:** `pattern = "abba"`, `s = "dog cat cat fish"`
- **输出:** `false`

**示例 3:**

- **输入:** `pattern = "aaaa"`, `s = "dog cat cat dog"`
- **输出:** `false`

**提示:**

- `1 <= pattern.length <= 300`
- `pattern` 只包含小写英文字母
- `1 <= s.length <= 3000`
- `s` 只包含小写英文字母和 `' '`
- `s` **不包含** 任何前导或尾随空格
- `s` 中每个单词都被 **单个空格** 分隔

## Java 代码

```java
import java.util.HashMap;
import java.util.Map;

public class Main {

    /**
     * 判断字符串 s 是否遵循 pattern 的规律。
     *
     * @param pattern 规律字符串，只包含小写字母
     * @param s       待匹配的字符串，由空格分隔的单词组成
     * @return 如果 s 遵循 pattern，返回 true，否则返回 false
     */
    public static boolean wordPattern(String pattern, String s) {
        // 将字符串 s 按空格分割成单词数组
        String[] words = s.split(" ");

        // 如果 pattern 的长度和单词数量不匹配，肯定不遵循规律
        if (pattern.length() != words.length) {
            return false;
        }

        // 使用两个 HashMap 来维护双向映射关系
        // 第一个 Map: Character (from pattern) -> String (from s)
        Map<Character, String> charToWord = new HashMap<>();
        // 第二个 Map: String (from s) -> Character (from pattern)
        Map<String, Character> wordToChar = new HashMap<>();

        for (int i = 0; i < pattern.length(); i++) {
            char pChar = pattern.charAt(i);
            String sWord = words[i];

            // 检查正向映射: pChar -> sWord
            if (charToWord.containsKey(pChar)) {
                // 如果已存在映射，但映射的单词与当前单词不符，则返回 false
                if (!charToWord.get(pChar).equals(sWord)) {
                    return false;
                }
            } else {
                // 如果是新的映射，则添加
                charToWord.put(pChar, sWord);
            }

            // 检查反向映射: sWord -> pChar
            if (wordToChar.containsKey(sWord)) {
                // 如果已存在映射，但映射的字符与当前字符不符，则返回 false
                if (wordToChar.get(sWord) != pChar) {
                    return false;
                }
            } else {
                // 如果是新的映射，则添加
                wordToChar.put(sWord, pChar);
            }
        }

        // 如果遍历完成都没有发现矛盾，则说明遵循规律
        return true;
    }

    public static void main(String[] args) {
        // 示例 1
        String pattern1 = "abba";
        String s1 = "dog cat cat dog";
        System.out.println("输入: pattern = \"" + pattern1 + "\", s = \"" + s1 + "\"");
        System.out.println("输出: " + wordPattern(pattern1, s1)); // 预期: true
        System.out.println("---");

        // 示例 2
        String pattern2 = "abba";
        String s2 = "dog cat cat fish";
        System.out.println("输入: pattern = \"" + pattern2 + "\", s = \"" + s2 + "\"");
        System.out.println("输出: " + wordPattern(pattern2, s2)); // 预期: false
        System.out.println("---");

        // 示例 3
        String pattern3 = "aaaa";
        String s3 = "dog cat cat dog";
        System.out.println("输入: pattern = \"" + pattern3 + "\", s = \"" + s3 + "\"");
        System.out.println("输出: " + wordPattern(pattern3, s3)); // 预期: false
        System.out.println("---");

        // 额外测试用例
        String pattern4 = "abc";
        String s4 = "dog cat dog";
        System.out.println("输入: pattern = \"" + pattern4 + "\", s = \"" + s4 + "\"");
        System.out.println("输出: " + wordPattern(pattern4, s4)); // 预期: false
        System.out.println("---");
    }
}
```
