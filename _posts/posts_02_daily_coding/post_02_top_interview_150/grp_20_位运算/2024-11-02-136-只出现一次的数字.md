---
title: 136. 只出现一次的数字
date: 2024-11-02 06:00:00 +0800
categories: [Daily Coding, Top Interview 150, 位运算]
tags: [位运算]
toc: true
math: true
pin: false
render_with_liquid: false
image:
  path: https://cdn.jsdelivr.net/gh/Zong-Liang/blog_images/blog/2024/daily_coding/20251121235105566.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
---

## 题目

**描述：**

给你一个 **非空** 整数数组 `nums`，除了某个元素只出现一次以外，其余每个元素均出现两次。找出那个只出现了一次的元素。

你必须设计并实现线性时间复杂度的算法来解决此问题，且该算法只使用常数量额外空间。

**示例 1:**

- **输入:** `nums = [2,2,1]`
- **输出:** 1

**示例 2:**

- **输入:** `nums = [4,1,2,1,2]`
- **输出:** 4

**示例 3:**

- **输入:** `nums = [1]`
- **输出:** 1

**提示:**

- `1 <= nums.length <= 3 * 10^4`
- `-3 * 10^4 <= nums[i] <= 3 * 10^4`
- 除了某个元素只出现一次以外，其余每个元素均出现两次。

## 题解

### 解法：位运算 (Bit Manipulation - XOR)

**思路：**

这道题对算法的复杂度有严格要求：**线性时间复杂度** $O(n)$ 和 **常数空间复杂度** $O(1)$。

如果不考虑空间复杂度，我们可以使用哈希表统计频率；如果不考虑时间复杂度，我们可以排序后查找。但要同时满足两者，**位运算（异或）** 是唯一的最佳解法。

利用异或运算（XOR，符号 `^`）的以下三个性质：

1.  **归零律**：任何数和自己做异或运算，结果为 0。即 $a \oplus a = 0$。
2.  **恒等律**：任何数和 0 做异或运算，结果还是它自己。即 $a \oplus 0 = a$。
3.  **交换律和结合律**：$a \oplus b \oplus a = (a \oplus a) \oplus b = 0 \oplus b = b$。

由于数组中除了一个元素只出现一次外，其余每个元素都出现两次。如果我们把数组中所有的数进行异或运算，成对出现的数字会两两抵消变成 0，最终剩下的结果就是那个只出现一次的数字。

**复杂度分析：**

- **时间复杂度：** $O(n)$，只需要遍历一次数组。
- **空间复杂度：** $O(1)$，只需要一个变量保存异或结果。

**代码片段：**

```java
public int singleNumber(int[] nums) {
    int single = 0;
    for (int num : nums) {
        // 异或运算：相同为 0，不同为 1
        // a ^ a = 0, a ^ 0 = a
        single ^= num;
    }
    return single;
}
```

### 完整代码

```java
import java.util.Arrays;

public class Main {

    /**
     * 136. 只出现一次的数字 - 异或解法
     */
    public static int singleNumber(int[] nums) {
        int result = 0;
        for (int num : nums) {
            result ^= num;
        }
        return result;
    }

    public static void main(String[] args) {
        // --- 示例 1 ---
        int[] nums1 = {2, 2, 1};
        System.out.println("示例 1 输入: " + Arrays.toString(nums1));
        System.out.println("示例 1 输出: " + singleNumber(nums1));
        // 解释: 2^2^1 = 0^1 = 1
        System.out.println("-----------------------------");

        // --- 示例 2 ---
        int[] nums2 = {4, 1, 2, 1, 2};
        System.out.println("示例 2 输入: " + Arrays.toString(nums2));
        System.out.println("示例 2 输出: " + singleNumber(nums2));
        // 解释: 4^1^2^1^2 = 4^(1^1)^(2^2) = 4^0^0 = 4
        System.out.println("-----------------------------");

        // --- 示例 3 ---
        int[] nums3 = {1};
        System.out.println("示例 3 输入: " + Arrays.toString(nums3));
        System.out.println("示例 3 输出: " + singleNumber(nums3));
        System.out.println("-----------------------------");
    }
}
```
