---
title: 69. x的平方根
date: 2024-11-13 06:00:00 +0800
categories: [Daily Coding, Top Interview 150, 数学]
tags: [数学]
toc: true
math: true
pin: false
render_with_liquid: false
image:
  path: https://cdn.jsdelivr.net/gh/Zong-Liang/blog_images/blog/2024/daily_coding/20251121235500903.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
---

## 题目：69. x 的平方根

给你一个非负整数 `x`，计算并返回 `x` 的 **算术平方根**。

由于返回类型是整数，结果只保留 **整数部分**，小数部分将被 **舍去**。

**注意：** 不允许使用任何内置指数函数和算符，例如 `pow(x, 0.5)` 或者 `x ** 0.5`。

**示例 1:**

- **输入:** `x = 4`
- **输出:** 2

**示例 2:**

- **输入:** `x = 8`
- **输出:** 2
- **解释:** 8 的算术平方根是 2.82842...，由于返回类型是整数，小数部分将被舍去。

**提示:**

- `0 <= x <= 2^31 - 1`

## Java 代码

以下是使用 **二分查找** 法实现的解决方案。这个问题的本质是寻找一个最大的整数 `k`，使得 `k*k <= x`。这是一个典型的可以在有序区间 `[0, x]` 中进行搜索的问题。

```java
import java.util.Scanner;


public class Main {

    /**
     * 计算并返回 x 的算术平方根的整数部分。
     *
     * @param x 一个非负整数。
     * @return x 的算术平方根的整数部分。
     */
    public static int mySqrt(int x) {
        // 处理边界情况
        if (x == 0) {
            return 0;
        }

        // 初始化二分查找的左右边界
        int left = 1;
        int right = x;
        int ans = 0; // 用来存储最终结果

        while (left <= right) {
            // 计算中间值，使用 (right - left) / 2 + left 方式防止溢出
            int mid = left + (right - left) / 2;

            // 判断 mid * mid 是否小于等于 x
            // 为了防止 mid * mid 溢出，我们使用除法 mid <= x / mid
            if (mid <= x / mid) {
                // 如果 mid 的平方小于等于 x，那么 mid 可能是一个解。
                // 我们记录下来，并尝试在右半部分寻找更大的解。
                ans = mid;
                left = mid + 1;
            } else {
                // 如果 mid 的平方大于 x，那么 mid 太大了，
                // 我们需要在左半部分寻找解。
                right = mid - 1;
            }
        }
        return ans;
    }


    /**
     * 主函数，包含题目给出的测试用例。
     * @param args 命令行参数（未使用）。
     */
    public static void main(String[] args) {
        System.out.println("--- 示例 1 ---");
        int x1 = 4;
        System.out.println("输入: x = " + x1);
        int result1 = mySqrt(x1);
        System.out.println("输出: " + result1); // 预期输出: 2
        System.out.println();

        System.out.println("--- 示例 2 ---");
        int x2 = 8;
        System.out.println("输入: x = " + x2);
        int result2 = mySqrt(x2);
        System.out.println("输出: " + result2); // 预期输出: 2
        System.out.println();

        System.out.println("--- 边界测试用例 ---");
        int x3 = 2147395599; // 接近 Integer.MAX_VALUE 的一个数
        System.out.println("输入: x = " + x3);
        int result3 = mySqrt(x3);
        System.out.println("输出: " + result3); // 预期输出: 46339
    }
}
```
