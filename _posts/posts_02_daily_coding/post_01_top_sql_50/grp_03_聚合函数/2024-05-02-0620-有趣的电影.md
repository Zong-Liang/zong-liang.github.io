---
title: 0620. 有趣的电影
date: 2024-05-02 06:00:00 +0800
categories: [Daily Coding, Top SQL 50, 聚合函数]
tags: [聚合函数]
toc: true
math: true
pin: false
render_with_liquid: false
image:
  path: https://cdn.jsdelivr.net/gh/Zong-Liang/blog_images/blog/2024/daily_coding/20251121163456739.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
---

## 题目：0620. 有趣的电影

**表:** `cinema`

| Column Name | Type    |
| ----------- | ------- |
| id          | int     |
| movie       | varchar |
| description | varchar |
| rating      | float   |

- `id` 是该表的主键（具有唯一值的列）。
- 每行包含有关电影名称、类型和评级的信息。
- 评级为 `[0,10]` 范围内的小数点后 2 位浮点数。

**问题描述:**

编写解决方案，找出所有影片描述为 **非** `boring` (不无聊) 的并且 `id` 为 **奇数** 的影片。

返回结果按 `rating` **降序排列**。

**示例 1:**

**输入:**

| id  | movie      | description | rating |
| --- | ---------- | ----------- | ------ |
| 1   | War        | great 3D    | 8.9    |
| 2   | Science    | fiction     | 8.5    |
| 3   | irish      | boring      | 6.2    |
| 4   | Ice song   | Fantacy     | 8.6    |
| 5   | House card | Interesting | 9.1    |

**输出:**

| id  | movie      | description | rating |
| --- | ---------- | ----------- | ------ |
| 5   | House card | Interesting | 9.1    |
| 1   | War        | great 3D    | 8.9    |

**解释:**
我们有三部电影，它们的 id 是奇数:1、3 和 5。id = 3 的电影是 boring 的，所以我们不把它包括在答案中。

## 正确答案 (MySQL)

你可以使用 `WHERE` 子句来筛选出符合条件的电影，并使用 `ORDER BY` 对结果进行排序。

```sql
SELECT *
FROM cinema
WHERE MOD(id, 2) = 1
  AND description != 'boring'
ORDER BY
    rating DESC;
```

**查询逻辑分解:**

1. **`SELECT * FROM cinema`**:

   - 从 `cinema` 表中选择所有的列。

2. **`WHERE MOD(id, 2) = 1 AND description != 'boring'`**:

   - 这是一个包含两个条件的 `WHERE` 子句，只有同时满足这两个条件的行才会被选中。
   - `MOD(id, 2) = 1`: 使用 `MOD` 函数（取模运算）来检查 `id` 是否为奇数。如果 `id` 除以 2 的余数是 1，则该 `id` 是奇数。
   - `description != 'boring'`: 检查 `description` 列的值是否 **不** 等于 'boring'。

3. **`ORDER BY rating DESC`**:
   - 根据题目要求，将筛选出的结果按 `rating` 列进行 **降序** (`DESC`) 排列。
