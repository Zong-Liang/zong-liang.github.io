---
title: 1527. 患某种疾病的患者
date: 2024-07-05 06:00:00 +0800
categories: [Daily Coding, Top SQL 50, 高级字符串函数_正则表达式_子句]
tags: [高级字符串函数_正则表达式_子句]
toc: true
math: true
pin: false
render_with_liquid: false
image:
  path: https://cdn.jsdelivr.net/gh/Zong-Liang/blog_images/blog/2024/daily_coding/20251121171500783.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
---

## 题目：1527. 患某种疾病的患者

**患者信息表:** `Patients`

| Column Name  | Type    |
| ------------ | ------- |
| patient_id   | int     |
| patient_name | varchar |
| conditions   | varchar |

在 SQL 中, `patient_id` (患者 ID) 是该表的主键。
`conditions` (疾病) 包含 0 个或以上的疾病代码，以空格分隔。
这个表包含医院中患者的信息。

**问题描述:**

查询患有 I 类糖尿病的患者 ID (`patient_id`)、患者姓名 (`patient_name`) 以及其患有的所有疾病代码 (`conditions`)。I
类糖尿病的代码总是包含前缀 `DIAB1`。

按 **任意顺序** 返回结果表。

**示例 1:**

**输入:**
`Patients` 表:

| patient_id | patient_name | conditions   |
| ---------- | ------------ | ------------ |
| 1          | Daniel       | YFEV COUGH   |
| 2          | Alice        |              |
| 3          | Bob          | DIAB100 MYOP |
| 4          | George       | ACNE DIAB100 |
| 5          | Alain        | DIAB201      |

**输出:**

| patient_id | patient_name | conditions   |
| ---------- | ------------ | ------------ |
| 3          | Bob          | DIAB100 MYOP |
| 4          | George       | ACNE DIAB100 |

**解释:** Bob 和 George 都患有代码以 `DIAB1` 开头的疾病。

## 题解

你可以使用 `LIKE` 操作符来匹配 `conditions` 列中包含以 `DIAB1` 开头的单词。

```sql
SELECT patient_id,
       patient_name,
       conditions
FROM Patients
WHERE conditions LIKE 'DIAB1%'
   OR conditions LIKE '% DIAB1%';

```

**查询逻辑分解:**

- `SELECT patient_id, patient_name, conditions FROM Patients`: 从 `Patients` 表中选择所需的列。
- `WHERE conditions LIKE 'DIAB1%' OR conditions LIKE '% DIAB1%'`: 这是筛选条件，用于找出患有 I 类糖尿病的患者。它包含了两种情况：
  - `conditions LIKE 'DIAB1%'`: 查找 `conditions` 字段以 `DIAB1` 开头的记录。这会匹配像 `'DIAB100 MYOP'` 这样的情况。
  - `conditions LIKE '% DIAB1%'`: 查找 `conditions` 字段中，前面有一个空格，然后跟着 `DIAB1` 的记录。这会匹配像
    `'ACNE DIAB100'` 这样的情况。
- 使用 `OR` 将这两个条件组合起来，就能确保无论 `DIAB1` 开头的疾病代码出现在字符串的开头还是中间，都能被正确地找出来。
