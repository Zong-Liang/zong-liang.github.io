---
title: 1729. 求关注者的数量
date: 2024-05-27 06:00:00 +0800
categories: [Daily Coding, Top SQL 50, 排序和分组]
tags: [排序和分组]
toc: true
math: true
pin: false
render_with_liquid: false
image:
  path: https://cdn.jsdelivr.net/gh/Zong-Liang/blog_images/blog/2024/daily_coding/20251121164849882.png
  lqip: data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAADwAABwAAQUxQSDIAAAARL0AmbZurmr57yyIiqE8oiG0bejIYEQTgqiDA9vqnsUSI6H+oAERp2HZ65qP/VIAWAFZQOCBCAAAA8AEAnQEqEAAIAAVAfCWkAALp8sF8rgRgAP7o9FDvMCkMde9PK7euH5M1m6VWoDXf2FkP3BqV0ZYbO6NA/VFIAAAA
---

## 题目：1729. 求关注者的数量

**表:** `Followers`

| Column Name | Type |
| ----------- | ---- |
| user_id     | int  |
| follower_id | int  |

- `(user_id, follower_id)` 是这个表的主键（具有唯一值的列的组合）。
- 该表包含一个关注关系中关注者和用户的编号，其中关注者关注用户。

**问题描述:**

编写解决方案，对于每一个用户，返回该用户的关注者数量。

按 `user_id` 的顺序返回结果表。

**示例 1:**

**输入:**

`Followers` 表:

| user_id | follower_id |
| ------- | ----------- |
| 0       | 1           |
| 1       | 0           |
| 2       | 0           |
| 2       | 1           |

**输出:**

| user_id | followers_count |
| ------- | --------------- |
| 0       | 1               |
| 1       | 1               |
| 2       | 2               |

**解释:**

- 0 的关注者有 {1}
- 1 的关注者有 {0}
- 2 的关注者有 {0,1}

## 题解

你可以使用 `GROUP BY` 子句按 `user_id` 对行进行分组，然后使用 `COUNT()` 函数计算每个用户的关注者数量。

```sql
SELECT user_id,
       COUNT(follower_id) AS followers_count
FROM Followers
GROUP BY user_id
ORDER BY user_id ASC;
```

**查询逻辑分解:**

1. **`SELECT user_id, COUNT(follower_id) AS followers_count`**:

   - `user_id`: 选择我们要为其计数的用户的 ID。
   - `COUNT(follower_id)`: 计算每个分组中的 `follower_id` 的数量，这也就是该用户的关注者数量。
   - `AS followers_count`: 将计数结果的列重命名为 `followers_count`。

2. **`FROM Followers`**:

   - 指定要查询的表是 `Followers`。

3. **`GROUP BY user_id`**:

   - 这是此查询的核心。它将 `Followers` 表中具有相同 `user_id` 的所有行组合成一个单独的组。`COUNT()` 函数将在此分组上操作。

4. **`ORDER BY user_id ASC`**:

   - 根据题目要求，按 `user_id` 对最终结果进行升序排序。
